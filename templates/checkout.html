{% extends "base.html" %}
{% load static %}


{% block title %}
    Оформить заказ
{% endblock %}


{% block content %}
    <section class="breadcrumb__section breadcrumb__bg">
        <div class="container">
            <div class="breadcrumb__content text-center px-3">
                <ul class="breadcrumb__content--menu d-flex">
                    <li class="breadcrumb__content--menu__items">
                        <a href="{% url 'home' %}">Главная</a>
                    </li>
                    <li class="breadcrumb__content--menu__items">
                        <a href="{% url 'checkout' %}">Оформить заказ</a>
                    </li>
                </ul>
            </div>
            <h1 class="breadcrumb__content--title text-center">Оформить заказ</h1>
        </div>
    </section>
    {% if products %}
        <section class="checkout__page--area section--padding">
            <div class="container">
                <div class="row" style="overflow: hidden;">
                    <div class="col-lg-15 ps-0 pe-4 position-relative">
                        <div class="section__header">
                            <h2 id="cart--title" class="cart__section__header--title h3">Корзина</h2>
                        </div>
                        <div id="cart--items" class="checkout__section--short__desc" style="display: none;">
                            {% for product in products %}
                                <span class="mb-4">{{ product.name }}</span><br>
                            {% endfor %}
                            <div class="checkout--edit__block" id="shipping--edit__block--cart">
                                <button id="cart--edit" class="checkout--edit--btn primary__btn"
                                        style="display: none;">Изменить
                                </button>
                            </div>
                        </div>
                        <div id="cart--items__large" class="cart__table checkout__product--table">
                            <table class="cart__table--inner">
                                <tbody class="cart__table--body">
                                {% for product in products %}
                                    <tr class="cart__table--body__items">
                                        <td class="cart__table--body__list">
                                            <div class="cart__product--desc d-block d-md-flex align-items-center">
                                                <div class="product__description order-md-1">
                                                    <h4 class="product__description--name">
                                                        <a href="{% url 'product' product.id %}">{{ product.name }}</a>
                                                    </h4>
                                                    <span class="product__description--variant">Артикул: 1234567890</span>
                                                </div>
                                                <div class="product__thumbnail border-radius-5">
                                                    <a class="display-block" href="{% url 'product' product.id %}">
                                                        <img class="product__thumbnail--img display-block border-radius-5"
                                                             src="{{ product.images.first.image.url }}"
                                                             alt="{{ product.name }} image">
                                                    </a>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="cart__table--body__list position-relative">
                                            <div class="cart__product--value d-block d-md-flex bottom-0"
                                                 data-product-id="{{ product.id }}"
                                                 data-index="{{ forloop.counter0 }}">
                                                <div class="product--amount d-flex align-items-center pe-0 pe-md-5">
                                                    <button class="product--amount__btn increase">
                                                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                                            <line x1="0" y1="10" x2="20" y2="10" stroke="currentColor"
                                                                  stroke-width="2"></line>
                                                            <line x1="10" y1="20" x2="10" y2="0" stroke="currentColor"
                                                                  stroke-width="2"></line>
                                                        </svg>
                                                    </button>
                                                    <label>
                                                        <input size="1" type="text" class="product--amount__input"
                                                               value="1">
                                                    </label>
                                                    <button class="product--amount__btn decrease">
                                                        <svg width="20" height="2" viewBox="0 0 20 2" fill="none">
                                                            <line x1="0" y1="1" x2="20" y2="1" stroke="currentColor"
                                                                  stroke-width="2"></line>
                                                        </svg>
                                                    </button>
                                                </div>
                                                <div class="product--price">
                                                    {% if product.discount_price %}
                                                        <span class="cart__price">{{ product.discount_price }}₴</span>
                                                        <span class="cart__price--old text-decoration-line-through">{{ product.price }}₴</span>
                                                    {% else %}
                                                        <span class="cart__price">{{ product.price }}₴</span>
                                                    {% endif %}
                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                {% endfor %}
                                </tbody>

                            </table>
                        </div>
                    </div>
                    <div class="col-lg-14 p-0 px-md-4">
                        <aside class="checkout__sidebar sidebar d-block d-md-flex d-lg-block">
                            <div class="checkout__order col-md-6 col-lg-12">
                                <h2 class="checkout__order--summary__title mb-3 mb-md-7 mb-lg-5">Итого</h2>
                                <div class="checkout__total mb-lg-5">
                                    <table class="checkout__total--table">
                                        <tbody class="checkout__total--body">
                                        <tr class="checkout__total--items">
                                            <td class="checkout__total--title text-left">Товар на сумму</td>
                                            <td class="checkout-total checkout__total--amount text-right">{{ total_price }}₴</td>
                                        </tr>
                                        <tr class="checkout__total--items">
                                            <td class="checkout__total--title text-left">Стоимость доставки</td>
                                            <td class="checkout__total--amount text-right">Бесплатно</td>
                                        </tr>
                                        </tbody>
                                        <tfoot class="checkout__total--footer">
                                        <tr class="checkout__total--footer__items">
                                            <td class="checkout__total--footer__title checkout__total--amount checkout__total--footer__list text-left">
                                                К оплате
                                            </td>
                                            <td class="checkout-total checkout__total--amount checkout__total--footer__list text-right"
                                                id="total-price-with-discount">
                                                {{ total_price }}₴
                                            </td>
                                        </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>
                            <div class="checkout__discount--code d-flex align-items-center width-100 ps-md-6 ps-lg-0">
                                <form class="d-flex position-relative width-100" action="#">
                                    <label class="width-100 mb-md-0">
                                        <input class="checkout__discount--code__input--field border-radius-5"
                                               placeholder="Промокод" type="text">
                                    </label>
                                    <button class="checkout__discount--code__btn primary__btn border-radius-5"
                                            type="submit">Ок
                                    </button>
                                </form>
                            </div>
                        </aside>
                    </div>
                    <div class="checkout--next__action mt-6 px-6 px-md-0">
                        <button id="cart--next__action" data-target="contacts--title"
                                class="checkout--next__action--btn primary__btn">Продолжить
                            оформление
                        </button>
                    </div>
                    <div class="section--shipping__address col-lg-15 pe-4">
                        <div class="section--shipping__address--content">
                            <div class="shipping__info row position-relative width-100">
                                <div class="col-13">
                                    <div id="contacts--number" class="section__number">1
                                    </div>
                                </div>
                                <div class="col-14 ps-7 ms-6 position-relative flex-grow-1">
                                    <div class="section__header">
                                        <h2 id="contacts--title"
                                            class="cart__section__header--title checkout__section--folded h3">Контактная
                                            информация</h2>
                                    </div>
                                    <div id="contacts--items" class="checkout__section--short__desc"
                                         style="display: block;">
                                        <span class="mb-4 span_name"></span><br>
                                        <span class="mb-4 span_phone"></span><br>
                                        <span class="span_email"></span>
                                        <div class="checkout--edit__block">
                                            <button id="contacts--edit" class="checkout--edit--btn primary__btn">
                                                Изменить
                                            </button>
                                        </div>
                                    </div>
                                    <div id="contacts--items__large" class="checkout--contact__information"
                                         style="display: none;">
                                        <div class="col-12 mb-20">
                                            <div class="checkout__input--list ">
                                                <label>
                                                    <input class="checkout__input--field border-radius-5"
                                                           placeholder="Имя" id="input_name" type="text">
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-12 mb-20">
                                            <div class="checkout__input--list">
                                                <label>
                                                    <input class="checkout__input--field border-radius-5"
                                                           placeholder="Телефон"
                                                           id="input_phone" type="text"></label>
                                            </div>
                                        </div>
                                        <div class="col-12 mb-20">
                                            <div class="checkout__input--list">
                                                <label>
                                                    <input class="checkout__input--field border-radius-5"
                                                           placeholder="E-mail" id="input_email" type="text">
                                                </label>
                                            </div>
                                        </div>
                                        <button id="contacts--next__action" data-target="shipping--title"
                                                class="checkout--next__action--btn primary__btn">Продолжить
                                            оформление
                                        </button>
                                    </div>

                                </div>
                            </div>
                            <div class="shipping__info row position-relative width-100">
                                <div class="col-13">
                                    <div id="shipping--number" class="section__number ">2</div>
                                </div>
                                <div class="col-14 ps-7 ms-6 position-relative flex-grow-1">
                                    <div class="section__header">
                                        <h2 id="shipping--title"
                                            class="cart__section__header--title checkout__section--folded h3">Способ
                                            доставки</h2>
                                    </div>
                                    <div id="shipping--items" class="checkout__section--short__desc"
                                         style="display: block;">
                                        <span class="mb-4 span_shipment-method"></span><br>
                                        <span class="span_city"></span>
                                        <div class="checkout--edit__block">
                                            <button id="shipping--edit" class="checkout--edit--btn primary__btn">
                                                Изменить
                                            </button>
                                        </div>
                                    </div>
                                    <div id="shipping--items__large" class="checkout--shipping__information"
                                         style="display: none;">
                                        <div class="checkout__input--select__list">
                                            <label class="checkout__input--label me-0 me-md-5" for="input_city">Доставка
                                                в</label>
                                            <div class="checkout__input--select select">
                                                <select class="checkout__input--select__field border-radius-5 flex-grow-0"
                                                        id="input_city">
                                                    {% for city in cities %}
                                                        <option value="{{ city.id }}">{{ city.name }}</option>
                                                    {% endfor %}
                                                </select>
                                            </div>
                                        </div>
                                        <div class="slider-container mt-5">
                                            <div class="shipment--types__list shipment slider d-flex mb-5">
                                                <button id="pickup" data-id="1" class="slide shipment__page--list--item shipping">
                                                    <div class="shipment__method--type__thumbnail">
                                                        <svg width="39" height="37" viewBox="0 0 39 37"
                                                             fill="none"
                                                             xmlns="http://www.w3.org/2000/svg">
                                                            <path d="M13.5001 35.5998C15.3779 35.5998 16.9001 34.0776 16.9001 32.1998C16.9001 30.322 15.3779 28.7998 13.5001 28.7998C11.6223 28.7998 10.1001 30.322 10.1001 32.1998C10.1001 34.0776 11.6223 35.5998 13.5001 35.5998Z"
                                                                  stroke="#FF0000" stroke-width="1.5"
                                                                  stroke-miterlimit="10"></path>
                                                            <path d="M31.1998 35.5998C33.0776 35.5998 34.5998 34.0776 34.5998 32.1998C34.5998 30.322 33.0776 28.7998 31.1998 28.7998C29.322 28.7998 27.7998 30.322 27.7998 32.1998C27.7998 34.0776 29.322 35.5998 31.1998 35.5998Z"
                                                                  stroke="#FF0000" stroke-width="1.5"
                                                                  stroke-miterlimit="10"></path>
                                                            <path d="M32.7 27.6C14.1 27.6 13.3 27.6 13.3 27.6L7.6 1H0"
                                                                  stroke="#FF0000" stroke-width="1.5"
                                                                  stroke-miterlimit="10"></path>
                                                            <path d="M9 7.40039C37.9 7.40039 37.9 7.40039 37.9 7.40039L33.8 22.9004H12.3"
                                                                  stroke="#FF0000" stroke-width="1.5"
                                                                  stroke-miterlimit="10"></path>
                                                            <path d="M10.7002 15.0996H35.7002" stroke="#FF0000"
                                                                  stroke-width="1.5"
                                                                  stroke-miterlimit="10"></path>
                                                            <path d="M15.8999 7.40039L17.9999 22.9004"
                                                                  stroke="#FF0000"
                                                                  stroke-width="1.5"
                                                                  stroke-miterlimit="10"></path>
                                                            <path d="M23.3999 7.40039V22.9004" stroke="#FF0000"
                                                                  stroke-width="1.5"
                                                                  stroke-miterlimit="10"></path>
                                                            <path d="M30.3002 7.40039L28.7002 22.9004"
                                                                  stroke="#FF0000"
                                                                  stroke-width="1.5"
                                                                  stroke-miterlimit="10"></path>
                                                        </svg>
                                                    </div>
                                                    <h4 class="shipment__method--type__description">Самовывоз из
                                                        магазина</h4>
                                                </button>
                                                <button id="meest" data-id="2" class="slide shipment__page--list--item shipping">
                                                    <div class="shipment__method--type__thumbnail">
                                                        <svg width="127.000000" height="41.000000"
                                                             viewBox="0 0 127 41"
                                                             fill="none" xmlns="http://www.w3.org/2000/svg"
                                                             xmlns:xlink="http://www.w3.org/1999/xlink">
                                                            <path id="Vector"
                                                                  d="M48.2 6.29C41.8 6.29 36.6 11.59 36.6 18.2L36.6 20.2C36.6 26.7 41.8 32.09 48.2 32.09C51.89 32.09 55.39 31.5 58.3 30.5L57.5 25.39C54.7 25.89 52.6 26.7 48.2 26.09C43.7 25.5 43.6 21.5 43.6 21.5L59.7 21.5C59.7 21.09 59.8 20.59 59.8 20.2L59.8 18.2C59.8 11.59 56 6.29 48.2 6.29ZM43.6 16.09C43.6 13.39 45.7 11.2 48.2 11.2C50.7 11.2 52.8 13.39 52.8 16.09L43.6 16.09Z"
                                                                  fill="#FF0000" fill-opacity="1.000000"
                                                                  fill-rule="nonzero"></path>
                                                            <path id="Vector"
                                                                  d="M115.9 0.2L121.2 9.79L115.8 19.4L121 19.4L126.4 9.79L121.1 0.2L115.9 0.2Z"
                                                                  fill="#FF0000" fill-opacity="1.000000"
                                                                  fill-rule="nonzero"></path>
                                                            <path id="Vector"
                                                                  d="M33.79 0L35.89 31.9L29.39 31.9L27.6 5.59L21.5 31.29L19.79 31.29L15.89 31.29L14.2 31.29L8.2 5.9L6.5 31.9L0 31.9L2.1 0L6.89 0L8.7 0L12.79 0L18 22.79L23.2 0L27.39 0L29.1 0L33.79 0ZM84.6 18.09L84.6 20.09C84.6 20.5 84.6 21 84.5 21.4L68.39 21.4C68.39 21.4 68.5 25.29 73 26C77.5 26.59 79.5 25.79 82.29 25.29L83.1 30.4C80.1 31.4 76.6 32 73 32C66.6 32 61.39 26.59 61.39 20.09L61.39 18.09C61.39 11.59 66.6 6.2 73 6.2C80.79 6.29 84.6 11.59 84.6 18.09ZM77.6 16.09C77.6 13.4 75.5 11.2 73 11.2C70.5 11.2 68.39 13.4 68.39 16.09L77.6 16.09ZM95.6 16.2C92.5 15.09 92.2 14.59 92.2 13.7C92.2 13 92.39 12.79 92.6 12.59C94.7 10.5 97.6 11.5 99.79 11.79L100.8 6.29C100 6.2 91.7 5.79 88.7 8.29C87.1 9.59 85.79 11.5 85.79 13.7C85.79 19.5 90.7 20.4 93.6 21.5C97 22.79 96.7 23.29 96.7 24.7C96.7 25.09 96.5 25.2 96.39 25.29C94.7 28.4 88.29 26.59 86.1 25.2L84.79 30.29C85.89 30.59 89.39 31.79 93.2 31.79C96 31.79 98.89 31.29 100.9 29.79C102.5 28.59 103.3 26.79 103.3 24.7C103.4 19.09 98.7 17.4 95.6 16.2ZM114.2 25.5C113 25.5 111.9 24.5 111.9 23.2L111.9 0.09L104.9 0.09L104.9 6.9L101.9 6.9L101.3 12L104.9 12L104.9 24.9C104.9 28.79 108.1 32 112 32L113.4 32C114.9 32 116.2 31.59 117.4 30.79L117.4 25.4C117.2 25.5 117 25.5 116.7 25.5L114.2 25.5ZM117.3 6.9L113.2 6.9L113.2 12L117.3 12L118.6 9.59L118.6 9.2L117.3 6.9Z"
                                                                  fill="#0061B5" fill-opacity="1.000000"
                                                                  fill-rule="nonzero"></path>
                                                            <path id="Vector"
                                                                  d="M37.29 35.79L58.19 35.79L58.19 40.79L37.29 40.79L37.29 35.79Z"
                                                                  fill="#FF002E" fill-opacity="1.000000"
                                                                  fill-rule="evenodd"></path>
                                                        </svg>
                                                    </div>
                                                    <h4 class="shipment__method--type__description">Доставка
                                                        Meest
                                                        Express на
                                                        отделение</h4>
                                                </button>
                                                <button id="nova_office" data-id="3"
                                                        class="slide shipment__page--list--item shipping">
                                                    <div class="shipment__method--type__thumbnail">
                                                        <svg width="40.000000" height="40.000000"
                                                             viewBox="0 0 40 40"
                                                             fill="none" xmlns="http://www.w3.org/2000/svg"
                                                             xmlns:xlink="http://www.w3.org/1999/xlink">
                                                            <path id="Vector"
                                                                  d="M16.3 8.29L16.3 15.59L23.5 15.59L23.5 8.29L28.2 8.29L19.89 0L11.6 8.29L16.3 8.29Z"
                                                                  fill="#FF0000" fill-opacity="1.000000"
                                                                  fill-rule="nonzero"></path>
                                                            <path id="Vector"
                                                                  d="M31 28.59L39.79 19.89L31 11.09L31 28.59Z"
                                                                  fill="#FF0000" fill-opacity="1.000000"
                                                                  fill-rule="nonzero"></path>
                                                            <path id="Vector"
                                                                  d="M23.5 31.1L23.5 23.7L16.3 23.7L16.3 31.1L11.2 31.1L19.9 39.79L28.6 31.1L23.5 31.1Z"
                                                                  fill="#FF0000" fill-opacity="1.000000"
                                                                  fill-rule="nonzero"></path>
                                                            <path id="Vector"
                                                                  d="M8.79 11.09L0 19.89L8.79 28.59L8.79 11.09Z"
                                                                  fill="#FF0000" fill-opacity="1.000000"
                                                                  fill-rule="nonzero"></path>
                                                        </svg>
                                                    </div>
                                                    <h4 class="shipment__method--type__description">Доставка
                                                        Новой
                                                        Почтой на
                                                        отделение</h4>
                                                </button>
                                                <button id="nova_courier" data-id="4"
                                                        class="slide shipment__page--list--item shipping">
                                                    <div class="shipment__method--type__thumbnail">
                                                        <svg width="31.000000" height="41.000000"
                                                             viewBox="0 0 31 41"
                                                             fill="none" xmlns="http://www.w3.org/2000/svg"
                                                             xmlns:xlink="http://www.w3.org/1999/xlink">
                                                            <path id="Vector"
                                                                  d="M5.7 11.8L5.7 14.4L8.3 14.4L8.3 11.8L9.9 11.8L7 8.9L4.1 11.8L5.7 11.8Z"
                                                                  fill="#FF0000" fill-opacity="1.000000"
                                                                  fill-rule="nonzero"></path>
                                                            <path id="Vector"
                                                                  d="M10.89 19L14 15.89L10.89 12.79L10.89 19Z"
                                                                  fill="#FF0000" fill-opacity="1.000000"
                                                                  fill-rule="nonzero"></path>
                                                            <path id="Vector"
                                                                  d="M8.3 19.79L8.3 17.2L5.7 17.2L5.7 19.79L4 19.79L7 22.9L10 19.79L8.3 19.79Z"
                                                                  fill="#FF0000" fill-opacity="1.000000"
                                                                  fill-rule="nonzero"></path>
                                                            <path id="Vector"
                                                                  d="M3.1 12.79L0 15.89L3.1 19L3.1 12.79Z"
                                                                  fill="#FF0000" fill-opacity="1.000000"
                                                                  fill-rule="nonzero"></path>
                                                            <path id="Vector"
                                                                  d="M23.5 15.9C22.8 15.9 22.1 16 21.4 16.3C21.1 16.3 20.7 16.4 20.5 16.6L20.2 17C19.5 17.5 18.9 18.2 18.4 18.9L12.5 25.1L3.1 25.1C1.4 25.1 0.1 26.4 0.1 28.1C0.1 29.8 1.4 31.1 3.1 31.1L13.8 31.1C14.8 31.1 15.7 30.6 16.29 29.8L17 29.2L17 32.2L17 40.2L30.2 40.2L30.2 32.2L30.2 27.5L30.2 23.8C30.1 19.5 27.2 15.9 23.5 15.9Z"
                                                                  fill="#FF0000" fill-opacity="1.000000"
                                                                  fill-rule="nonzero"></path>
                                                            <path id="Vector"
                                                                  d="M30.1 3C30.1 1.4 28.7 0 27.1 0L19.5 0C17.89 0 16.5 1.4 16.5 3L16.5 5.4L14 5.4L14 7.9L16.6 7.9C17.1 11.2 19.9 13.7 23.3 13.7C27.1 13.7 30.1 10.7 30.1 6.9C30.1 6.7 30.1 6.5 30.1 6.29C30.1 6.2 30.1 6.09 30.1 6L30.1 3Z"
                                                                  fill="#FF0000" fill-opacity="1.000000"
                                                                  fill-rule="nonzero"></path>
                                                        </svg>
                                                    </div>
                                                    <h4 class="shipment__method--type__description">Доставка
                                                        курьером Новой
                                                        Почты по городу</h4>
                                                </button>
                                            </div>
                                        </div>
                                        <div class="row mb-8" style="position: relative;">
                                            <div class="shipment__method__addresses">
                                                <ul class="widget__form--check only-one">
                                                    {% include 'partials/branches_list-checkout.html' %}
                                                </ul>
                                            </div>
                                            <div class="shipment__method__map map__img">
                                                <gmp-map id="map-regular" center="46.48167419433594,30.68355941772461" zoom="14"
                                                         map-id="DEMO_MAP_ID">
                                                    <gmp-advanced-marker id="marker-regular"
                                                                         position="46.48167419433594,30.68355941772461"
                                                                         title="My location"></gmp-advanced-marker>
                                                </gmp-map>
                                            </div>
                                        </div>

                                        <button id="shipping--next__action" data-target="payment--title"
                                                class="checkout--next__action--btn primary__btn">Продолжить
                                            оформление
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="shipping__info row position-relative width-100">
                                <div class="col-13">
                                    <div id="payment--number" class="section__number ">3</div>
                                </div>
                                <div class="col-14 ps-7 ms-6 position-relative flex-grow-1">
                                    <div class="section__header">
                                        <h2 id="payment--title"
                                            class="cart__section__header--title checkout__section--folded h3">Способ
                                            оплаты</h2>
                                    </div>
                                    <div id="payment--items" class="checkout__section--short__desc"
                                         style="display: block;">
                                        <span class="span_payment-method"></span>
                                        <div class="checkout--edit__block">
                                            <button id="payment--edit" class="checkout--edit--btn primary__btn">
                                                Изменить
                                            </button>
                                        </div>
                                    </div>
                                    <div id="payment--items__large" class="checkout--shipping__information"
                                         style="display: none;">
                                        <div id="payment--slider" class="slider-container mt-5">
                                            <div class="shipment--types__list payment slider mb-5">
                                                <button id="cod" data-id="1" class="slide shipment__page--list--item payment">
                                                    <h4 class="shipment__method--type__description payment">Наложеный
                                                        платеж при
                                                        получении
                                                        (при сумме
                                                        заказа от 200
                                                        грн.)</h4>
                                                </button>
                                                <button id="card" data-id="2" class="slide shipment__page--list--item payment">
                                                    <h4 class="shipment__method--type__description payment">Оплата на
                                                        карту</h4>
                                                </button>
                                                <button id="cash__store" data-id="3"
                                                        class="slide shipment__page--list--item payment">
                                                    <h4 class="shipment__method--type__description payment">Наличными
                                                        (при
                                                        самовывозе
                                                        из магазина)</h4>
                                                </button>
                                                <button id="bank__transfer--vat" data-id="4"
                                                        class="slide shipment__page--list--item payment">
                                                    <h4 class="shipment__method--type__description payment">Безналичный
                                                        расчет с НДС</h4>
                                                </button>
                                                <button id="bank__transfer" data-id="5"
                                                        class="slide shipment__page--list--item payment">
                                                    <h4 class="shipment__method--type__description payment">Безналичный
                                                        расчет без
                                                        НДС</h4>
                                                </button>
                                            </div>
                                        </div>
                                        <button id="payment--next__action" data-target="comments--title"
                                                class="checkout--next__action--btn primary__btn">Продолжить
                                            оформление
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="shipping__info row position-relative width-100">
                                <div class="col-13">
                                    <div id="comments--number" class="section__number ">4</div>
                                </div>
                                <div class="col-14 ps-7 ms-6 position-relative flex-grow-1">
                                    <div class="section__header">
                                        <h2 id="comments--title"
                                            class="cart__section__header--title checkout__section--folded h3">
                                            Комментарий</h2>
                                    </div>
                                    <div id="comments--items" class="checkout__section--short__desc"
                                         style="display: block;">
                                        <span class="span_comments"></span>
                                        <div class="checkout--edit__block">
                                            <button id="comments--edit" class="checkout--edit--btn primary__btn">
                                                Изменить
                                            </button>
                                        </div>
                                    </div>
                                    <div id="comments--items__large" class="checkout--shipping__information"
                                         style="display: none;">
                                        <label>
                                            <textarea class="comments--text__field"
                                                      placeholder="Добавьте комментарий к заказу"
                                                      id="text_comment"></textarea>
                                        </label>
                                        <button id="comments--next__action" data-target="confirmation--title"
                                                class="checkout--next__action--btn primary__btn">Продолжить
                                            оформление
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="shipping__info row position-relative width-100">
                                <div class="col-13">
                                    <div id="confirmation--number" class="section__number ">5</div>
                                </div>
                                <div class="col-14 ps-7 ms-6 position-relative flex-grow-1">
                                    <div class="section__header">
                                        <h2 id="confirmation--title"
                                            class="cart__section__header--title checkout__section--folded h3">
                                            Подтверждение заказа</h2>
                                    </div>
                                    <div id="confirmation--items" class="checkout__section--short__desc"
                                         style="display: block;">
                                    </div>
                                    <div id="confirmation--items__large" class="checkout--shipping__information"
                                         style="display: none;">
                                        <!-- Таблица с заказом -->
                                        <table class="confirm__order--table">
                                            <thead class="confirm__order--head">
                                            <tr>
                                                <th>Наименование</th>
                                                <th>Артикул</th>
                                                <th class="confirm__order--head--amount__full">Количество</th>
                                                <th class="confirm__order--head--amount__short">Кол&#8209;во</th>
                                                <th>Цена</th>
                                            </tr>
                                            </thead>
                                            <tbody class="confirm__order--body">
                                            {% for product in products %}
                                                <tr data-index="{{ forloop.counter0 }}">
                                                    <td>{{ product.name }}</td>
                                                    <td>1234567890</td>
                                                    <td class="text-center product-amount-confirm"
                                                        data-index="{{ forloop.counter0 }}">1
                                                    </td>
                                                    <td class="text-center product-price-confirm"
                                                        data-index="{{ forloop.counter0 }}">
                                                        {{ product.discount_price|default:product.price }}₴
                                                    </td>
                                                </tr>
                                            {% endfor %}
                                            </tbody>

                                        </table>
                                        <!-- Информация о покупателе -->
                                        <div class="confirm__order--info">
                                            <div class="confirm__order--summary" style="width: 70%">
                                                <label><span class="span_name"></span><br>
                                                    <span class="confirm__order--summary--text span_phone"></span>
                                                    ,
                                                    <span class="span_email"></span>
                                                </label>
                                                <div class="d-flex flex-row">
                                                    <label>
                                                        <span>Доставка:</span>
                                                        <span>Оплата:</span>
                                                    </label>
                                                    <label>
                                                        <span class="confirm__order--summary--text span_shipment-method"></span>
                                                        ,
                                                        <span class="confirm__order--summary--text span_city"></span>
                                                        <span class="confirm__order--summary--text span_payment-method"></span>
                                                        <br>
                                                        <span class="confirm__order--summary--text span_comments"></span>
                                                    </label>
                                                </div>

                                            </div>
                                            <div class="confirm__order--summary text-right">
                                                <label>Итого: <span
                                                        class="checkout-total confirm__order--summary--number">{{ total_price }}₴</span></label>
                                            </div>

                                        </div>
                                        <div class="confirmation--final">
                                            <button id="confirmation--next__action"
                                                    class="checkout--next__action--btn final__action primary__btn">
                                                Подтверждение заказа
                                            </button>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    {% endif %}
    
    <div class="map-modal" id="mapModal">
        <div class="map-modal-content">
            <span class="map-modal-close">&times;</span>
            <gmp-map id="map-modal" center="46.48167419433594,30.68355941772461" zoom="14" map-id="DEMO_MAP_ID">
                <gmp-advanced-marker id="marker-modal" position="46.48167419433594,30.68355941772461" title="My location"></gmp-advanced-marker>
            </gmp-map>
        </div>
    </div>
    
{% endblock %}


{% block scripts %}
    <script src="{% static '/src/assets/js/slider.js' %}"></script>
    <script>
        // Получаем ссылку на элемент с id payment--slider
        const paymentSliderContainer = document.getElementById('payment--slider');
        const paymentSlider = paymentSliderContainer.querySelector('.slider');

        // Функция для проверки размера экрана и скрытия/отображения элемента
        function toggleSliderContainer(sliderContainer, slider) {
            if (window.innerWidth <= 540) {
                sliderContainer.classList.remove('slider-container');
                disableSlider(slider);
            } else {
                sliderContainer.classList.add('slider-container');
                enableSlider(slider);
            }
        }


        setTimeout(() => {
            toggleSliderContainer(paymentSliderContainer, paymentSlider)
        }, 50);

        // Добавляем обработчик события изменения размера окна браузера
        window.addEventListener('resize', () => toggleSliderContainer(paymentSliderContainer, paymentSlider));

    </script>
    <script src="{% static 'src/assets/js/checkoutPageSectionsFolding.js' %}"></script>
    <script src="{% static 'src/assets/js/independentCounters.js' %}"></script>
    <script src="{% static 'src/assets/js/toggleButtonOutline.js' %}"></script>
    <script src="{% static 'src/assets/js/checkoutButtons.js' %}"></script>
    <script src="{% static 'src/assets/js/oneOptionCheckInput.js' %}"></script>
    <script defer src="{% static 'src/assets/js/mapCreator.js' %}"></script>
    <script src="{% static 'src/assets/js/getBranches.js' %}"></script>
    <script src="{% static 'src/assets/js/applyPromo.js' %}"></script>
    <script src="{% static 'src/assets/js/confirmOrder.js' %}"></script>
    <script
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCMnDGy6nqzX36bSjyh3Kzdts7wvwqTMY0&loading=async&libraries=marker&v=beta&solution_channel=GMP_CCS_complexmarkers_v3"
            defer
    ></script>

{% endblock %}
